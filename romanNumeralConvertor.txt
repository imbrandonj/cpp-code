// Program Exercise 10.6
// Author: Brandon Jenkins


// This program converts Roman numerals into integers
// Or integers into Roman numerals


#include <iostream>
#include <string>
#include <vector>

using namespace std;


class romanType
{
    public:
        void storeRomanNumeral(string roman);  // stores given Roman numeral
        void convertRomanNumeral(string roman);  // converts Roman numeral to int
        void storeInteger(unsigned int posInteger);  // stores given integer
        void convertInteger(unsigned int posInteger);  // converts int to Roman numeral
        void printRomanNumeral(vector<char> romanVect);  // prints Roman numeral format
        void printInteger(int convertedInt);  // prints integer format
    
    private:
        string romanNumeral;  // user provided Roman numeral to be converted
        int storedInteger;  // user provided integer to be converted
};

int main()
{   
    romanType romanConversion;
    char convertWhich;
    string inputRomanNumeral;
    int inputInteger = -1;
    char continueConversion = 'Y';
    
    cout << "This program converts Roman Numerals into integers,\n";
    cout << "And integers into Roman Numerals.\n";
    cout << "Tell me which you'd like to convert.\n";
    
    // Loop requiring the user to input R, r, I, or i 
    while ( continueConversion == 'Y' || continueConversion == 'y' ) {
        cout << "Enter 'R' or 'r' for Roman Numeral and 'I' or 'i' for integer: ";
        cin >> convertWhich;
        
        // user selects roman numeral:
        if ( convertWhich == 'R' || convertWhich == 'r' ) {
            cout << "For a reminder,\n";
            cout << "M = 1000, D = 500, C = 100, L = 50, X = 10, V= 5, I = 1\n";
            cout << "Enter the Roman Numeral you wish to convert: ";
            cin >> inputRomanNumeral;
            
            // begin conversion operation call stack
            romanConversion.storeRomanNumeral(inputRomanNumeral);
            
            // continue or exit
            cout << "Do you have another conversion you'd like to perform?";
            cout << " (Enter 'Y' or 'y' for yes): ";
            cin >> continueConversion;
        } 
        
        // user selects integer:
        else if ( convertWhich == 'I' || convertWhich == 'i' ) {
            
            // only accept positive integers
            while ( inputInteger < 0 ) {
                cout << "Enter the integer you wish to convert: ";
                cin >> inputInteger; 
                if ( inputInteger < 0 )
                    cout << "Please enter a positive integer." << endl;
            };
            
            // begin conversion operation call stack
            romanConversion.storeInteger(inputInteger);
            
            // continue or exit
            cout << "Do you have another conversion you'd like to perform?";
            cout << " (Enter 'Y' or 'y' for yes): ";
            cin >> continueConversion;
        }
    };
    
    cout << "\nThanks for converting!" << endl;
    return 0;
}  // end main


void romanType::storeRomanNumeral(string roman)
{
    // This function stores our roman numeral member variable and
    // Begins conversion call stack
    romanNumeral = roman;
    convertRomanNumeral(romanNumeral);
};


void romanType::convertRomanNumeral(string roman)
{   
    // This function converts the Roman Numeral to an integer
    
    int convertedToInt = 0;
    for ( int i = 0; i < roman.size(); i++ ) {
        if ( roman[i] == 'M' )
            convertedToInt += 1000;
        else if ( roman[i] == 'D' )
            convertedToInt += 500;
        else if ( roman[i] == 'C' )
            convertedToInt += 100;
        else if ( roman[i] == 'L' )
            convertedToInt += 50;
        else if ( roman[i] == 'X' )
            convertedToInt += 10;
        else if ( roman[i] == 'V' )
            convertedToInt += 5;
        else if ( roman[i] == 'I' )
            convertedToInt += 1;
        else {
            cout << "Incorrect input given. Try again." << endl;
            return;
        }
    }
    
    printInteger(convertedToInt); // prints our newly converted integer
};


void romanType::storeInteger(unsigned int posInteger)
{
    // This function stores our integer member variable and
    // Begins conversion call stack
    storedInteger = posInteger;
    convertInteger(storedInteger);
};


void romanType::convertInteger(unsigned int posInteger)
{   
    // This function converts the member integer variable into a Roman Numeral
    
    vector<char> convertedRoman;  // A beautiful vector of roman numeral chars
    
    // Roman numerals assigned until our member integer variable equals 0
    while ( storedInteger > 0 ) {
        if ( storedInteger >= 1000 ) {
            convertedRoman.push_back('M');
            storedInteger -= 1000;
        } else if ( storedInteger >= 500 ) {
            convertedRoman.push_back('D');
            storedInteger -= 500;
        } else if ( storedInteger >= 100 ) {
            convertedRoman.push_back('C');
            storedInteger -= 100;
        } else if ( storedInteger >= 50 ) {
            convertedRoman.push_back('L');
            storedInteger -= 50;
        } else if ( storedInteger >= 10 ) {
            convertedRoman.push_back('X');
            storedInteger -= 10;
        } else if ( storedInteger >= 5 ) {
            convertedRoman.push_back('V');
            storedInteger -= 5;
        } else if ( storedInteger >= 1 ) {
            convertedRoman.push_back('I');
            storedInteger -= 1;
        }
    }
    
    printRomanNumeral(convertedRoman);
};


void romanType::printRomanNumeral(vector<char> romanVect)
{
     // prints Roman numeral format
     
    for ( int i = 0; i < romanVect.size(); i++ ) {
        cout << romanVect[i];
    }
    cout << endl;
}; 


void romanType::printInteger(int convertedInt)
{
    // prints integer format
    cout << convertedInt << endl;
};  

