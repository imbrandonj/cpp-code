// Reads from file input
// Converts contents to piglatin
// Streams to output file

#include <iostream>
#include <fstream>
#include <string>

using namespace std;

bool isVowel(char ch);
string punctuationManipulation(string pStr);
string rotate(string pStr);
string pigLatinString(string pStr);

int main() {

  ifstream inData;
  ofstream outData;
  string data;
  string pigData;

  inData.open("Ch7_Ex3Data.txt");
  outData.open("Ch7_Ex3Out.txt");

  while (inData >> data) {
    pigData = pigLatinString(data);
    outData << pigData << " ";
  }

  inData.close();
  outData.close();
    
  return 0;
}

bool isVowel(char ch) {
  switch (ch) {
    case 'A':
    case 'E':
    case 'I':
    case 'O':
    case 'Y':
    case 'a':
    case 'e':
    case 'i':
    case 'o':
    case 'u':
    case 'y':
      return true;
    default:
      return false;
  }
}

string punctuationManipulation(string pStr) {
  int len = pStr.length();
  int counter;
  char ch;

  for (counter = 0; counter < len - 1; counter++) {
    ch = pStr[counter];
    switch (ch) {
      case ',':
      case '.':
      case '?':
      case ';':
      case ':':
        pStr.erase(pStr.begin() + counter);
        pStr = pStr + ch;
    }
  }
  return pStr;
}

string rotate(string pStr) {
  string::size_type len = pStr.length();

  string rStr;
  rStr = pStr.substr(1, len - 1) + pStr[0];

  return rStr;
}

string pigLatinString(string pStr) {
  string::size_type len;
  bool foundVowel;
  string::size_type counter;

  if (isVowel(pStr[0]))
    pStr = pStr + "-way";

  else {
    pStr = pStr + '-';
    pStr = rotate(pStr);

    len = pStr.length();
    foundVowel = false;

    for (counter = 1; counter < len - 1; counter++)

      if (isVowel(pStr[0])) {
        foundVowel = true;
        break;
      } 
      else 
        pStr = rotate(pStr);
      
    if (!foundVowel)
      pStr = pStr.substr(1, len) + "-way";

    else
      pStr = pStr + "ay";
  }

  return punctuationManipulation(pStr);
}
